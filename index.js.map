{"version":3,"file":"index.js","sources":["../src/js/footer.js","../src/js/exercises.js"],"sourcesContent":["import 'izitoast/dist/css/iziToast.min.css';\nimport iziToast from 'izitoast';\nimport Api from './api/index';\nimport { gsap } from 'gsap';\n\nconst formSubmit = document.querySelector('.js-footer-form');\nconst emailInput = document.querySelector('input[type=\"email\"]');\nconst btnSubmit = document.querySelector('.footer_form_btn');\nbtnSubmit.addEventListener('click', fetchSubscription);\n\nfunction isValidEmail(email) {\n  const emailPattern = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;\n  return emailPattern.test(email);\n}\n\nbtnSubmit.disabled = true;\n\nemailInput.addEventListener('input', () => {\n  const email = emailInput.value;\n\n  if (isValidEmail(email)) {\n    btnSubmit.classList.add('active');\n    btnSubmit.disabled = false;\n  } else {\n    btnSubmit.classList.remove('active');\n    btnSubmit.disabled = true;\n  }\n});\n\nemailInput.addEventListener('blur', () => {\n    const email = emailInput.value;\n  \n    if (!isValidEmail(email)) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Invalid email address was entered.',\n      });\n    }else {\n      btnSubmit.classList.add('active');\n      }\n  });\n\nfunction fetchSubscription(event) {\n  event.preventDefault();\n  const email = emailInput.value;\n  if (!isValidEmail(email)) {\n    console.log('tyta');\n    iziToast.error({\n      title: 'Error',\n      message: 'Invalid email address was entered.',\n    });\n    return;\n  }\n\n  const subscriptionData = {\n    email: email,\n  };\n\n  Api.addSubscription(subscriptionData)\n    .then(resp => {\n      const message = resp.data.message;\n      iziToast.success({\n        title: 'Success',\n        message: message,\n      });\n    })\n    .catch(error => {\n      const badRequest = error.response.data.message;\n      if (error.response.status === 409) {\n        iziToast.warning({\n          title: 'Warning',\n          message: 'Subscription already exists',\n        });\n        \n      } else if (error.response.status === 400) {\n        iziToast.warning({\n          title: 'Warning',\n          message: badRequest,\n        });\n      }\n    });\n  formSubmit.reset();\n}\n\nconst socialItems = document.querySelectorAll('.footer_soc_item');\n\nsocialItems.forEach(item => {\n  const icon = item.querySelector('.footer_soc_icon');\n  item.addEventListener('mouseenter', () => {\n    gsap.to(item, {\n      keyframes: {\n        '0%': { rotation: -5 },\n        '25%': { rotation: 5 },\n        '50%': { rotation: -5 },\n        '75%': { rotation: 5 },\n        '100%': { rotation: 0 },\n      },\n      duration: 0.5,\n      repeat: 1,\n    });\n\n    gsap.to(icon, {\n      keyframes: {\n        '0%': { x: -3 },\n        '25%': { x: 3 },\n        '50%': { x: -3 },\n        '75%': { x: 3 },\n        '100%': { x: 0 },\n      },\n      duration: 0.2,\n      repeat: 3,\n    });\n  });\n\n  item.addEventListener('mouseleave', () => {\n    gsap.to(item, {\n      rotation: 0,\n      duration: 0.2,\n    });\n\n    gsap.to(icon, {\n      x: 0,\n      duration: 0.2,\n    });\n  });\n});\n\nconst options = {\n  root: null,\n  rootMargin: '0px',\n  threshold: 0,\n};\nconst icon = document.querySelector('.footer_logo_icon');\nconst text = document.querySelector('.footer_title_span');\n\nconst observer = new IntersectionObserver(handleIntersection, options);\n\nobserver.observe(icon);\n\nfunction handleIntersection(entries, observer) {\n  entries.forEach(entry => {\n    if (!entry.isIntersecting) {\n      return;\n    }\n    gsap.to(icon, {\n      duration: 2,\n      opacity: 1,\n      x: 0,\n      rotationX: 360,\n    });\n    gsap.to(text, {\n      duration: 2,\n      opacity: 1,\n    });\n  });\n}\n","import Api from './api';\nimport { renderByExercises, renderByFilters, renderFilters } from './utils';\n\n(() => {\n  const HIDDEN_CLASS = 'hidden';\n  const FILTERS = {\n    muscles: 'Muscles',\n    bodyParts: 'Body parts',\n    equipment: 'Equipment',\n  };\n  const DEFAULT_FILTER = FILTERS.muscles;\n  const SEARCH_FILTER_MAPPING = {\n    [FILTERS.muscles]: 'muscles',\n    [FILTERS.bodyParts]: 'bodypart',\n    [FILTERS.equipment]: 'equipment',\n  };\n  const state = {\n    filter: null,\n    exercise: null,\n  };\n\n  const breadcrumbsNav = document.getElementById('breadcrumbs-nav');\n  const breadcrumbsHome = breadcrumbsNav.querySelector('.item-home');\n  const breadcrumbsFilters = document.getElementById('breadcrumbs-filters');\n  const exercisesWrapper = document.querySelector('.exercises');\n  const cards = exercisesWrapper.querySelector('.cards');\n  const cardsExercises = exercisesWrapper.querySelector('.cards-exercises');\n  const searchField = document.getElementById('search-field');\n  const searchForm = searchField.querySelector('.search-form');\n  const searchFieldInput = searchField.querySelector('.search-input');\n  const searchFieldSubmit = searchField.querySelector('.seach-submit');\n  const searchFieldReset = searchField.querySelector('.seach-reset');\n\n  // helpers\n  const showLoader = (shouldHide = false) => {\n    if (shouldHide) {\n      const loader = exercisesWrapper.querySelector('.loader');\n\n      if (loader) {\n        loader.remove();\n      }\n    } else {\n      const adjacentText = `<div class=\"loader\"></div>`;\n      exercisesWrapper.insertAdjacentHTML('beforeend', adjacentText);\n    }\n  };\n\n  /**\n   * Show / hide the search field's reset button\n   *\n   * @param {boolean} shouldHide\n   */\n  const showResetButton = (shouldHide = false) => {\n    if (shouldHide) {\n      searchFieldReset.classList.add(HIDDEN_CLASS);\n    } else {\n      searchFieldReset.classList.remove(HIDDEN_CLASS);\n    }\n  };\n\n  /**\n   * Show / hide and clear the search field's input\n   *\n   * @param {boolean} shouldHide\n   * @param {boolean} shouldClear\n   */\n  const showSearchField = (shouldHide = false, shouldClear = false) => {\n    if (shouldHide) {\n      searchField.classList.add(HIDDEN_CLASS);\n    } else {\n      searchField.classList.remove(HIDDEN_CLASS);\n    }\n\n    if (shouldClear) {\n      searchFieldInput.value = '';\n    }\n  };\n\n  /**\n   * Clear all cards, should be called before calling api\n   */\n  const clearCards = () => {\n    cards.innerHTML = '';\n    cardsExercises.innerHTML = '';\n  };\n\n  /**\n   * Clear an exercise in breadcrums\n   */\n  const clearBreadcrumbs = () => {\n    const categoryItem = breadcrumbsNav.querySelector('.item-exercise');\n    categoryItem.removeAttribute('title');\n    categoryItem.classList.remove('active');\n    categoryItem.innerText = '';\n  };\n\n  /**\n   * Add / update an exercise in breadcrums\n   */\n  const updateBreadcrumbs = exercise => {\n    const categoryItem = breadcrumbsNav.querySelector('.item-exercise');\n    categoryItem.setAttribute('title', exercise);\n    categoryItem.classList.add('active');\n    categoryItem.innerText = exercise;\n  };\n\n  /**\n   * Calls API to get exercises\n   *\n   * @param {string} filter\n   * @param {string} exercise\n   * @param {string} keyword\n   */\n  const searchByExercise = async (filter, exercise, keyword = '') => {\n    try {\n      clearCards();\n      showLoader();\n      updateBreadcrumbs(exercise);\n\n      const params = {\n        [SEARCH_FILTER_MAPPING[filter]]: exercise,\n        keyword,\n      };\n\n      const response = await Api.getExercises(params);\n      const { results } = response;\n      state.exercise = exercise;\n\n      renderByExercises(results, cardsExercises);\n    } catch (error) {\n      console.error(error);\n    } finally {\n      showLoader(true);\n      showSearchField();\n    }\n  };\n\n  /**\n   * Calls API to get filters\n   *\n   * @param {string} filter\n   */\n  const searchByFilter = async filter => {\n    try {\n      clearCards();\n      clearBreadcrumbs();\n      showLoader();\n      showSearchField(true, true);\n      const response = await Api.getFilters({ filter });\n      const { results } = response;\n      state.filter = filter;\n\n      renderByFilters(results, cards);\n\n      // highlight active filter\n      const filterElements = breadcrumbsFilters.querySelectorAll('.item');\n\n      for (let filterElement of filterElements) {\n        if (filterElement.innerText === filter) {\n          filterElement.classList.add('active');\n        } else {\n          filterElement.classList.remove('active');\n        }\n      }\n    } catch (error) {\n      console.error(error);\n    } finally {\n      showLoader(true);\n    }\n  };\n\n  // filter click listerner\n  const filterClickHandler = event => {\n    event.preventDefault();\n\n    if (event.target.nodeName !== 'A') {\n      return;\n    }\n\n    const filter = event.target.innerText.trim();\n    searchByFilter(filter);\n  };\n\n  breadcrumbsFilters.addEventListener('click', filterClickHandler);\n\n  // exercise click listerner\n  const exerciseClickHandler = event => {\n    event.preventDefault();\n    const { filter } = state;\n\n    if (event.target.nodeName !== 'DIV') {\n      return;\n    }\n\n    const exercise = event.target.dataset.category.trim();\n\n    if (exercise) {\n      searchByExercise(filter, exercise);\n    }\n  };\n\n  cards.addEventListener('click', exerciseClickHandler);\n\n  // form listerners\n  const searchHandler = event => {\n    event.preventDefault();\n    const { filter, exercise } = state;\n    const keyword = searchFieldInput.value.trim();\n\n    if (keyword) {\n      searchByExercise(filter, exercise, keyword);\n    }\n  };\n\n  const formResetHandler = () => {\n    showResetButton(true);\n    const { filter, exercise } = state;\n    searchByExercise(filter, exercise);\n  };\n\n  searchFieldSubmit.addEventListener('click', searchHandler);\n  searchForm.addEventListener('submit', searchHandler);\n  searchForm.addEventListener('reset', formResetHandler);\n\n  // search input listerner\n  const searchInputHandler = event => {\n    if (event.target.value.trim()) {\n      showResetButton();\n    } else {\n      showResetButton(true);\n    }\n  };\n\n  searchFieldInput.addEventListener('input', searchInputHandler);\n\n  breadcrumbsHome.addEventListener('click', () => {\n    searchByFilter(DEFAULT_FILTER);\n  });\n\n  // init\n  // rendering filters\n  renderFilters(Object.values(FILTERS), breadcrumbsFilters);\n\n  // rendering cards by default filter\n  searchByFilter(DEFAULT_FILTER);\n})();\n"],"names":["formSubmit","emailInput","btnSubmit","fetchSubscription","isValidEmail","email","iziToast","event","subscriptionData","Api","resp","message","error","badRequest","socialItems","item","icon","gsap","options","text","observer","handleIntersection","entries","entry","HIDDEN_CLASS","FILTERS","DEFAULT_FILTER","SEARCH_FILTER_MAPPING","state","breadcrumbsNav","breadcrumbsHome","breadcrumbsFilters","exercisesWrapper","cards","cardsExercises","searchField","searchForm","searchFieldInput","searchFieldSubmit","searchFieldReset","showLoader","shouldHide","loader","showResetButton","showSearchField","shouldClear","clearCards","clearBreadcrumbs","categoryItem","updateBreadcrumbs","exercise","searchByExercise","filter","keyword","params","response","results","renderByExercises","searchByFilter","renderByFilters","filterElements","filterElement","filterClickHandler","exerciseClickHandler","searchHandler","formResetHandler","searchInputHandler","renderFilters"],"mappings":"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"}