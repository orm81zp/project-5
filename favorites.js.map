{"version":3,"file":"favorites.js","sources":["../src/js/utils/helpers.js","../src/js/const/exercises.js","../src/js/favorites.js"],"sourcesContent":["export const getClosest = (target, querySelector) => {\n  return target.closest(querySelector);\n};\n\nexport const showLoader = (container, shouldHide = false) => {\n  if (shouldHide) {\n    const loader = container.querySelector('.loader');\n\n    if (loader) {\n      loader.remove();\n    }\n  } else {\n    const adjacentText = `<div class=\"loader\"></div>`;\n    container.insertAdjacentHTML('beforeend', adjacentText);\n  }\n};\n\nexport const clearContent = containers => {\n  if (Array.isArray(containers)) {\n    for (let container of containers) {\n      container.innerHTML = '';\n    }\n  } else {\n    containers.innerHTML = '';\n  }\n};\n","export const LOCAL_STORAGE_KEY = 'exercises';\n","import Api from './api';\nimport { LOCAL_STORAGE_KEY } from './const';\nimport {\n  clearContent,\n  getClosest,\n  renderByExercises,\n  showLoader,\n} from './utils';\n\n(() => {\n  const favoritesWrapper = document.querySelector('.favorites');\n  if (!favoritesWrapper) {\n    return;\n  }\n\n  const state = {\n    exercisesIds: [],\n  };\n\n  // TODO remove mock data before going to LIVE\n  const MOCK_EXERCISES = [\n    '64f389465ae26083f39b1b16',\n    '64f389465ae26083f39b1b22',\n    '64f389465ae26083f39b19d8',\n    '64f389465ae26083f39b1b08',\n    '64f389465ae26083f39b1859',\n    '64f389465ae26083f39b1a3a',\n    '64f389465ae26083f39b1964',\n  ];\n\n  state.exercisesIds =\n    JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY)) || MOCK_EXERCISES;\n  const exercisesContainer = favoritesWrapper.querySelector('.cards-exercises');\n  const favoritesWrapperContainer =\n    favoritesWrapper.querySelector('.favorites-wrapper');\n  const messageContainer = favoritesWrapper.querySelector(\n    '.notification-message'\n  );\n\n  // helpers\n  const removeIdFromStorage = exerciseId => {\n    state.exercisesIds = state.exercisesIds.filter(id => id !== exerciseId);\n  };\n\n  const exerciseClickHandler = event => {\n    event.preventDefault();\n    // check if clicked trash-button\n    const className = event.target.className;\n    const isTrashButton = className && className.includes('trash-link');\n\n    if (isTrashButton) {\n      const cardItem = getClosest(event.target, '.card-item');\n\n      if (cardItem && cardItem.dataset) {\n        removeIdFromStorage(cardItem.dataset.id);\n        const { exercisesIds } = state;\n        searchExercises(exercisesIds);\n      }\n    }\n  };\n\n  const searchExercises = async exercisesIds => {\n    if (!exercisesIds || exercisesIds.length === 0) {\n      clearContent(exercisesContainer);\n      messageContainer.classList.remove('hidden');\n      return;\n    }\n\n    messageContainer.classList.add('hidden');\n\n    try {\n      clearContent(exercisesContainer);\n      showLoader(favoritesWrapperContainer);\n      const [...exercises] = await Promise.all(\n        exercisesIds.map(id => Api.getExerciseById(id))\n      );\n      renderByExercises(exercises, exercisesContainer, true);\n    } catch (error) {\n      console.log(error);\n    } finally {\n      showLoader(favoritesWrapperContainer, true);\n    }\n  };\n\n  exercisesContainer.addEventListener('click', exerciseClickHandler);\n  searchExercises(state.exercisesIds);\n})();\n"],"names":["getClosest","target","querySelector","showLoader","container","shouldHide","loader","clearContent","containers","LOCAL_STORAGE_KEY","favoritesWrapper","state","MOCK_EXERCISES","exercisesContainer","favoritesWrapperContainer","messageContainer","removeIdFromStorage","exerciseId","id","exerciseClickHandler","event","className","cardItem","exercisesIds","searchExercises","exercises","Api","renderByExercises","error"],"mappings":"yFAAO,MAAMA,EAAa,CAACC,EAAQC,IAC1BD,EAAO,QAAQC,CAAa,EAGxBC,EAAa,CAACC,EAAWC,EAAa,KAAU,CAC3D,GAAIA,EAAY,CACd,MAAMC,EAASF,EAAU,cAAc,SAAS,EAE5CE,GACFA,EAAO,OAAM,CAEnB,MAEIF,EAAU,mBAAmB,YADR,4BACiC,CAE1D,EAEaG,EAAeC,GAAc,CACxC,GAAI,MAAM,QAAQA,CAAU,EAC1B,QAASJ,KAAaI,EACpBJ,EAAU,UAAY,QAGxBI,EAAW,UAAY,EAE3B,ECzBaC,EAAoB,aCShC,IAAM,CACL,MAAMC,EAAmB,SAAS,cAAc,YAAY,EAC5D,GAAI,CAACA,EACH,OAGF,MAAMC,EAAQ,CACZ,aAAc,CAAE,CACpB,EAGQC,EAAiB,CACrB,2BACA,2BACA,2BACA,2BACA,2BACA,2BACA,0BACJ,EAEED,EAAM,aACJ,KAAK,MAAM,aAAa,QAAQF,CAAiB,CAAC,GAAKG,EACzD,MAAMC,EAAqBH,EAAiB,cAAc,kBAAkB,EACtEI,EACJJ,EAAiB,cAAc,oBAAoB,EAC/CK,EAAmBL,EAAiB,cACxC,uBACJ,EAGQM,EAAsBC,GAAc,CACxCN,EAAM,aAAeA,EAAM,aAAa,OAAOO,GAAMA,IAAOD,CAAU,CAC1E,EAEQE,EAAuBC,GAAS,CACpCA,EAAM,eAAc,EAEpB,MAAMC,EAAYD,EAAM,OAAO,UAG/B,GAFsBC,GAAaA,EAAU,SAAS,YAAY,EAE/C,CACjB,MAAMC,EAAWtB,EAAWoB,EAAM,OAAQ,YAAY,EAEtD,GAAIE,GAAYA,EAAS,QAAS,CAChCN,EAAoBM,EAAS,QAAQ,EAAE,EACvC,KAAM,CAAE,aAAAC,CAAc,EAAGZ,EACzBa,EAAgBD,CAAY,CAC7B,CACF,CACL,EAEQC,EAAkB,MAAMD,GAAgB,CAC5C,GAAI,CAACA,GAAgBA,EAAa,SAAW,EAAG,CAC9ChB,EAAaM,CAAkB,EAC/BE,EAAiB,UAAU,OAAO,QAAQ,EAC1C,MACD,CAEDA,EAAiB,UAAU,IAAI,QAAQ,EAEvC,GAAI,CACFR,EAAaM,CAAkB,EAC/BV,EAAWW,CAAyB,EACpC,KAAM,CAAC,GAAGW,CAAS,EAAI,MAAM,QAAQ,IACnCF,EAAa,IAAIL,GAAMQ,EAAI,gBAAgBR,CAAE,CAAC,CACtD,EACMS,EAAkBF,EAAWZ,EAAoB,EAAI,CACtD,OAAQe,EAAO,CACd,QAAQ,IAAIA,CAAK,CACvB,QAAc,CACRzB,EAAWW,EAA2B,EAAI,CAC3C,CACL,EAEED,EAAmB,iBAAiB,QAASM,CAAoB,EACjEK,EAAgBb,EAAM,YAAY,CACpC,GAAI"}